<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Bobae Kang" />

<meta name="date" content="2018-03-22" />

<title>R Workshop: Module 2 (2)</title>

<script src="notes_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="notes_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="notes_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="notes_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="notes_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="notes_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="notes_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="notes_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="notes_files/navigation-1.1/tabsets.js"></script>
<link href="notes_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="notes_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="../css/style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">R Workshop: Module 2 (2)</h1>
<h4 class="author"><em>Bobae Kang</em></h4>
<h4 class="date"><em>March 22, 2018</em></h4>

</div>


<!-- fontawesome CDN -->
<p><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"></p>
<!-- logo -->
<div class="logo">
<p><a href="http://www.icjia.state.il.us/"><img src="../images/icjia.png" alt="ICJIA logo"></img></a></p>
</div>
<p>This page contains the notes for <strong>the second part of R Workshop Module 2: R basics</strong>, which is part of the R Workshop series prepared by ICJIA Research Analyst <a href="http://www.icjia.state.il.us/biographies/bobae-kang">Bobae Kang</a> to enable and encourage ICJIA researchers to take advantage of R, a statistical programming language that is one of the most powerful modern research tools.</p>
<div id="links" class="section level3">
<h3>Links</h3>
<p>Click <a href="../index.html"><strong>here</strong></a> to go to the workshop <strong>home page</strong>.</p>
<p>Click <a href="../modules.html"><strong>here</strong></a> to go to the workshop <strong>Modules page</strong>.</p>
<p>Click <a href="../slides/module2_slides2.html"><strong>here</strong></a> to view the accompanying <strong>slides for Module 2, Part 2</strong>.</p>
<p>Navigate to the other workshop materials:</p>
<button class="btn" data-toggle="collapse" data-target="#collapse-navigate" aria-expanded="false" aria-controls="collapse-navigate">
<strong>SEE MORE</strong>
</button>
<div id="collapse-navigate" class="collapse mt-1">
<div style="padding:20px;">
<ul>
<li><strong>Module 1: Introduction to R</strong> (<a href="../slides/module1_slides.html"><strong>slides</strong></a>, <a href="module1_notes.html"><strong>note</strong></a>)</li>
<li><strong>Module 2: R basics</strong>
<ul>
<li>Part 1 (<a href="../slides/module2_slides1.html"><strong>slides</strong></a>, <a href="module2_notes1.html"><strong>note</strong></a>)</li>
</ul></li>
<li><strong>Module 3: Data analysis with R</strong>
<ul>
<li>Part 1 (<a href="../slides/module3_slides1.html"><strong>slides</strong></a>, <a href="module3_notes1.html"><strong>note</strong></a>)</li>
<li>Part 2 (<a href="../slides/module3_slides2.html"><strong>slides</strong></a>, <a href="module3_notes2.html"><strong>note</strong></a>)</li>
</ul></li>
<li><strong>Module 4: Data visualization with R</strong>
<ul>
<li>Part 1 (<a href="../slides/module4_slides1.html"><strong>slides</strong></a>, <a href="module4_notes1.html"><strong>note</strong></a>)</li>
<li>Part 2 (<a href="../slides/module4_slides2.html"><strong>slides</strong></a>, <a href="module4_notes2.html"><strong>note</strong></a>)</li>
</ul></li>
<li><strong>Module 5: Statistical modeling with R</strong>
<ul>
<li>Part 1 (<a href="../slides/module5_slides1.html"><strong>slides</strong></a>, <a href="module5_notes1.html"><strong>note</strong></a>)</li>
<li>Part 2 (<a href="../slides/module5_slides2.html"><strong>slides</strong></a>, <a href="module5_notes2.html"><strong>note</strong></a>)</li>
</ul></li>
<li><strong>Module 6: “To Infinity and Beyond”</strong>
<ul>
<li>Part 1 (<a href="../slides/module6_slides1.html"><strong>slides</strong></a>, <a href="module6_notes1.html"><strong>note</strong></a>)</li>
<li>Part 2 (<a href="../slides/module6_slides2.html"><strong>slides</strong></a>, <a href="module6_notes2.html"><strong>note</strong></a>)</li>
</ul></li>
</ul>
</div>
</div>
<hr />
</div>
<div id="r-basics-2-gearing-up-for-data-analysis" class="section level1">
<h1>R Basics (2): Gearing up for data analysis</h1>
<p>Now that we have an understanding of the basic building blocks of R programming, we can prepare for conducting data analysis in R. Here we start with learning to work with R data frame, the very essense of tabular data manipulation in R. We will then be introduced to the <code>tidyverse</code> framework and the idea of “tidy” data. Finally, we will discuss some recommended coding styles for R.</p>
<hr />
</div>
<div id="r-data-frame" class="section level1">
<h1>R Data Frame</h1>
<pre><code>## [1] &quot;Look, a data frame!&quot;</code></pre>
<pre><code>##   column1 column2 column3 column4 column5
## 1      11      12      13      14      15
## 2      21      22      23      24      25
## 3      31      32      33      34      35
## 4      41      42      43      44      45
## 5      51      52      53      54      55</code></pre>
<div id="what-is-a-data-frame" class="section level2">
<h2>What is a data frame?</h2>
<p>A data frame is a tabular representation of data where each column is a vector of some type. You can think of Excel spreadsheets, SPSS tables, etc.!</p>
<p>In R, a data frame exists as a <code>data.frame</code> object, which can be seen as a <em>list of vectors</em> of <em>the same length</em>, but with additional functionalities for data analysis!</p>
<p>Accessing data in a data frame works similarly as in accessing data in a list. In fact, a list can be easily converted into a data frame using <code>as.data.frame()</code> (and vice versa, with <code>as.list()</code>).</p>
</div>
<div id="example-isp-crime-data" class="section level2">
<h2>Example: ISP crime data</h2>
<p>I have created an R package called <code>icjiar</code>, which comes with some sample datasets, including a data frame of ISP UCR data. Let’s take a look.</p>
<div id="inspecting-a-data.frame-obejct" class="section level3">
<h3>Inspecting a <code>data.frame</code> obejct</h3>
<p>First we import <code>icjiar</code> package to make <code>ispcrime</code> dataset available in the global environment.</p>
<p>If you do not have <code>icjiar</code> package installed on your computer yet, remove the hash symbol (<code>#</code>) on the first two lines of the following code chunk and execute it to get the package installed. You will then be able to import the package using <code>library()</code> function. See <a href="#package">here</a> for installing and loading packages.</p>
<pre class="r"><code># install.packages(&quot;devtools&quot;)
# devtools::install_github(&quot;bobaekang/icjiar&quot;)
library(icjiar)

class(ispcrime)  # the class of ispcrime object is &quot;data.frame&quot;</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>Using the <code>class()</code> function, we find that <code>ispcrime</code> is a <code>data.frame</code> object. Alternatively, using the <code>is.data.frame()</code> function, we can check that <code>ispcrime</code> is indeed a <code>data.frame</code> object.</p>
<pre class="r"><code>is.data.frame(ispcrime)  # check if ispcrime is a data.frame; TRUE, as expected</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>Now, we take a look at the “structure” of <code>ispcrime</code>. <code>str()</code> is a function we use to bring out the sturcutre of an R object. In this case, <code>str()</code> prints that our object is a data frame with 12 variables and shows each variable with its data type as well as first few elements.</p>
<pre class="r"><code>str(ispcrime)  # reports the &quot;structure&quot; of the data frame </code></pre>
<pre><code>## &#39;data.frame&#39;:    510 obs. of  12 variables:
##  $ year         : int  2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 ...
##  $ county       : Factor w/ 102 levels &quot;Adams&quot;,&quot;Alexander&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ violentCrime : int  218 119 6 59 7 42 13 8 12 1210 ...
##  $ murder       : int  0 0 1 0 0 0 0 0 0 5 ...
##  $ rape         : int  37 14 0 24 1 4 0 1 1 127 ...
##  $ robbery      : int  15 4 0 8 0 3 0 0 0 208 ...
##  $ aggAssault   : int  166 101 5 27 6 35 13 7 11 870 ...
##  $ propertyCrime: int  1555 290 211 733 38 505 56 206 119 5332 ...
##  $ burglary     : int  272 92 58 152 14 90 14 38 41 1384 ...
##  $ larcenyTft   : int  1241 183 147 563 22 405 41 165 71 3756 ...
##  $ MVTft        : int  36 11 5 14 1 8 1 2 3 164 ...
##  $ arson        : int  6 4 1 4 1 2 0 1 4 28 ...</code></pre>
<p>Another way of understanding a data frmae is to print the first few rows. This can be achieved using <code>head()</code>, which prints out the first <code>n</code> rows of the data frame. The default is <code>n = 6</code>.</p>
<pre class="r"><code>head(ispcrime, 5)  # returns the first n rows of the data frame (default 6)</code></pre>
<pre><code>##   year    county violentCrime murder rape robbery aggAssault propertyCrime
## 1 2011     Adams          218      0   37      15        166          1555
## 2 2011 Alexander          119      0   14       4        101           290
## 3 2011      Bond            6      1    0       0          5           211
## 4 2011     Boone           59      0   24       8         27           733
## 5 2011     Brown            7      0    1       0          6            38
##   burglary larcenyTft MVTft arson
## 1      272       1241    36     6
## 2       92        183    11     4
## 3       58        147     5     1
## 4      152        563    14     4
## 5       14         22     1     1</code></pre>
<p>There are a few functions to inspect the shape of a <code>data.frame</code> object. First, we can try <code>dim()</code> to get the dimension (number of rows by number of columns) of a <code>data.frame</code> object. <code>nrow()</code> and <code>ncol()</code> return the number of rows and the number of columns of a <code>data.frame</code> object, respectively.</p>
<pre class="r"><code>dim(ispcrime)  # returns the dimension of the data frame (row  column)</code></pre>
<pre><code>## [1] 510  12</code></pre>
<pre class="r"><code>nrow(ispcrime)  # returns the number of rows in the data frame</code></pre>
<pre><code>## [1] 510</code></pre>
<pre class="r"><code>ncol(ispcrime)  # returns the number of columns in the data frame</code></pre>
<pre><code>## [1] 12</code></pre>
<p>Finally, we can use <code>colnames()</code> to obtain a vector of a <code>data.frame</code> object’s column names.</p>
<pre class="r"><code>colnames(ispcrime)  # returns a vector containing the column names </code></pre>
<pre><code>##  [1] &quot;year&quot;          &quot;county&quot;        &quot;violentCrime&quot;  &quot;murder&quot;       
##  [5] &quot;rape&quot;          &quot;robbery&quot;       &quot;aggAssault&quot;    &quot;propertyCrime&quot;
##  [9] &quot;burglary&quot;      &quot;larcenyTft&quot;    &quot;MVTft&quot;         &quot;arson&quot;</code></pre>
</div>
<div id="accessing-desired-subsets" class="section level3">
<h3>Accessing desired subsets</h3>
<p>Now we explore accessing desired subsets of a <code>data.frame</code> object. We start with columns. The following are three different ways to get the first column of <code>ispcrime</code>, which has the name <code>year</code>:</p>
<pre class="r"><code>ispcrime$year # access a column by name
ispcrime[[1]] # access the first column by index
ispcrime[, 1] # yet another way to access the first column!</code></pre>
<pre><code>##   [1] 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011
##  [15] 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011
##  [29] 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011
##  [43] 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011
##  [57] 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011
##  [71] 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011
##  [85] 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011
##  [99] 2011 2011 2011 2011 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012
## [113] 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012
## [127] 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012
## [141] 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012
## [155] 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012
## [169] 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012
## [183] 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012
## [197] 2012 2012 2012 2012 2012 2012 2012 2012 2013 2013 2013 2013 2013 2013
## [211] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013
## [225] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013
## [239] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013
## [253] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013
## [267] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013
## [281] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013
## [295] 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2014 2014
## [309] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014
## [323] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014
## [337] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014
## [351] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014
## [365] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014
## [379] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014
## [393] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014
## [407] 2014 2014 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015
## [421] 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015
## [435] 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015
## [449] 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015
## [463] 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015
## [477] 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015
## [491] 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 2015
## [505] 2015 2015 2015 2015 2015 2015</code></pre>
<p>Accessing select rows of a <code>data.frame</code> is somewhat simpler:</p>
<pre class="r"><code>ispcrime[1, ]  # access the first row by index</code></pre>
<pre><code>##   year county violentCrime murder rape robbery aggAssault propertyCrime
## 1 2011  Adams          218      0   37      15        166          1555
##   burglary larcenyTft MVTft arson
## 1      272       1241    36     6</code></pre>
<p>Combining these two, we can get to a particular cell in a <code>data.frame</code> object.</p>
<pre class="r"><code># access a specific cell (first row of the first column)
ispcrime$year[1]
ispcrime[[1]][1]
ispcrime[1, 1]</code></pre>
<pre><code>## [1] 2011</code></pre>
</div>
</div>
<div id="creating-a-data.frame-object" class="section level2">
<h2>Creating a data.frame object</h2>
<p>Most often, we will be working with <code>data.frame</code> objects that result from importing external datasets or come as part of imported packages. Sometimes, however, we need to create a <code>data.frame</code> object. There are two main ways to do so:</p>
<ul>
<li>Using <code>data.frame()</code>: Here, we either use vector objects as argument inputs or simultanesouly create vectors and assign column names to them.<br />
</li>
<li>Coercing a list using <code>as.data.frame()</code>: We can also convert an existing <code>list</code> object into a <code>data.frame</code> object.</li>
</ul>
<div id="using-data.frame" class="section level3">
<h3>Using data.frame()</h3>
<ol style="list-style-type: decimal">
<li>Using existing vectors</li>
</ol>
<pre class="r"><code>fruits &lt;- c(&quot;apple&quot;, &quot;banana&quot;, &quot;clementine&quot;)
animals &lt;- c(&quot;dogs&quot;, &quot;cats&quot;, &quot;llamas&quot;)
icecream_flavors &lt;- c(&quot;chocolate&quot;, &quot;vanila&quot;, &quot;cookie dough&quot;)

df1 &lt;- data.frame(fruits, animals, icecream_flavors)

print(df1)</code></pre>
<pre><code>##       fruits animals icecream_flavors
## 1      apple    dogs        chocolate
## 2     banana    cats           vanila
## 3 clementine  llamas     cookie dough</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Simultaneously creating vectors and assigning names</li>
</ol>
<pre class="r"><code>df2 &lt;- data.frame(
  fruits = c(&quot;apple&quot;, &quot;banana&quot;, &quot;clementine&quot;),
  animals = c(&quot;dogs&quot;, &quot;cats&quot;, &quot;llamas&quot;),
  icecream_flavors = c(&quot;chocolate&quot;, &quot;vanila&quot;, &quot;cookie dough&quot;)
)

print(df2)</code></pre>
<pre><code>##       fruits animals icecream_flavors
## 1      apple    dogs        chocolate
## 2     banana    cats           vanila
## 3 clementine  llamas     cookie dough</code></pre>
</div>
<div id="converting-a-list-using-as.data.frame" class="section level3">
<h3>Converting a list using as.data.frame()</h3>
<pre class="r"><code>lt &lt;- list(
  fruits = c(&quot;apple&quot;, &quot;banana&quot;, &quot;clementine&quot;),
  animals = c(&quot;dogs&quot;, &quot;cats&quot;, &quot;llamas&quot;),
  icecream_flavors = c(&quot;chocolate&quot;, &quot;vanila&quot;, &quot;cookie dough&quot;)
)

df3 &lt;- as.data.frame(lt)

print(df3)</code></pre>
<pre><code>##       fruits animals icecream_flavors
## 1      apple    dogs        chocolate
## 2     banana    cats           vanila
## 3 clementine  llamas     cookie dough</code></pre>
</div>
</div>
<div id="transforming-a-data.frame-object" class="section level2">
<h2>Transforming a <code>data.frame</code> object</h2>
<p>It is common to find that the given <code>data.frame</code> object is not exactly in the desired shape or form. Here we will take a quick look at the following four basic operations for transforming a <code>data.frame</code> object:</p>
<ul>
<li>change column names</li>
<li>add / modify / remove columns</li>
<li>add / modify / remove rows</li>
<li>modify cell values</li>
</ul>
<div id="change-column-names" class="section level3">
<h3>Change column names</h3>
<pre class="r"><code>colnames(df1) &lt;- c(&quot;my_fruits&quot;, &quot;my_animals&quot;, &quot;my_flavors&quot;)

print(df1)</code></pre>
<pre><code>##    my_fruits my_animals   my_flavors
## 1      apple       dogs    chocolate
## 2     banana       cats       vanila
## 3 clementine     llamas cookie dough</code></pre>
</div>
<div id="add-columns" class="section level3">
<h3>Add columns</h3>
<p>Adding new columns can be done in two ways. First, we can use one of the methods to access a column but with a slight twist: this time, we point to a non-existing column and assign a vector to it. Second, we can use the <code>cbind()</code> function, which takes an existing <code>data.frame</code> object and a vector as its arguments and returns a new <code>data.frame</code> object now with an additional column.</p>
<pre class="r"><code># using $ index
df1$my_colors &lt;- c(&quot;red&quot;, &quot;green&quot;, &quot;orange&quot;)

# using cbind() function
my_cities &lt;- c(&quot;Chicago&quot;, &quot;New Work&quot;, &quot;Los Angeles&quot;)
df1 &lt;- cbind(df1, my_cities)

print(df1)</code></pre>
<pre><code>##    my_fruits my_animals   my_flavors my_colors   my_cities
## 1      apple       dogs    chocolate       red     Chicago
## 2     banana       cats       vanila     green    New Work
## 3 clementine     llamas cookie dough    orange Los Angeles</code></pre>
<p>It must be noted that, in the example above, the length of both vectors for <code>my_colors</code> and <code>my_cities</code> had to match the number of columns in the existing <code>data.frame</code> obejct, <code>df1</code>. Otherwise, R will throw an error.</p>
<p>Also, when adding columns in the first way, we must be careful not to leave “holes” after existing columns. For example, if we try <code>df1[, 10] &lt;- c(1,2,3)</code>, R will throw an error because the <code>df1</code> cannot have the tenth column without already having the ninth column.</p>
</div>
<div id="modify-columns" class="section level3">
<h3>Modify columns</h3>
<p>Modifying existing columns is very similar to adding ones, except that we assign a new vector to overwrite an existing column. Also, note that we can use <code>NA</code> to give a missing value to certian cells.</p>
<pre class="r"><code>df1[[&quot;my_colors&quot;]] &lt;- c(&quot;maroon&quot;, &quot;blue&quot;, &quot;purple&quot;)
df1$my_cities &lt;- c(&quot;Chicago&quot;, NA, &quot;Paris&quot;)

df1</code></pre>
<pre><code>##    my_fruits my_animals   my_flavors my_colors my_cities
## 1      apple       dogs    chocolate    maroon   Chicago
## 2     banana       cats       vanila      blue      &lt;NA&gt;
## 3 clementine     llamas cookie dough    purple     Paris</code></pre>
</div>
<div id="remove-columns" class="section level3">
<h3>Remove columns</h3>
<p>There are two major ways to remove columns. First, we can point to a specific column and assign <code>NULL</code> to it. Alternatively, we can take a subset of the columns and reassign it to the object.</p>
<pre class="r"><code># assinging NULL
df1$my_colors &lt;- NULL

df1</code></pre>
<pre><code>##    my_fruits my_animals   my_flavors my_cities
## 1      apple       dogs    chocolate   Chicago
## 2     banana       cats       vanila      &lt;NA&gt;
## 3 clementine     llamas cookie dough     Paris</code></pre>
<pre class="r"><code># subsetting
df1 &lt;- df1[, 1:3]  # or c(&quot;my_fruits&quot;, &quot;my_animals&quot;, &quot;my_flavors&quot;)

df1</code></pre>
<pre><code>##    my_fruits my_animals   my_flavors
## 1      apple       dogs    chocolate
## 2     banana       cats       vanila
## 3 clementine     llamas cookie dough</code></pre>
</div>
<div id="add-rows" class="section level3">
<h3>Add rows</h3>
<p>Compared to columns, working with rows of a <code>data.frame</code> object is more limited.</p>
<p>Adding rows can be done by the <code>rbind()</code> function, which works similarly to how the aforementioned <code>cbind()</code> does.</p>
<pre class="r"><code>new_row &lt;- data.frame(
  my_fruits = &quot;strawberry&quot;,
  my_animals = &quot;monkeys&quot;,
  my_flavors = &quot;butter pecan&quot;
)
df1 &lt;- rbind(df1, new_row)

df1</code></pre>
<pre><code>##    my_fruits my_animals   my_flavors
## 1      apple       dogs    chocolate
## 2     banana       cats       vanila
## 3 clementine     llamas cookie dough
## 4 strawberry    monkeys butter pecan</code></pre>
</div>
<div id="remove-rows" class="section level3">
<h3>Remove rows</h3>
<p>An easy way to remove rows from a <code>data.frame</code> object is taking a subset and reassigning that to the object.</p>
<pre class="r"><code># subsetting
df1 &lt;- df1[1:3, ]

df1</code></pre>
<pre><code>##    my_fruits my_animals   my_flavors
## 1      apple       dogs    chocolate
## 2     banana       cats       vanila
## 3 clementine     llamas cookie dough</code></pre>
</div>
<div id="modify-cells" class="section level3">
<h3>Modify cells</h3>
<p>Modifying individual sells is not much different. However, we must make sure that the new element we would like to give to a cell is of the same type as the existing column. It is noteworthy that, when we create a <code>data.frame</code>, a character vector becomes a <code>factor</code> type by default (this default behavior can be changed with the <code>stringsAsFactors</code> argument of <code>data,frame()</code>). Therefore, the following will fail.</p>
<pre class="r"><code># this doesn&#39;t work ... why?
df1$my_flavors[1] &lt;- &quot;mint chocolate chip&quot;</code></pre>
<pre><code>## Warning in `[&lt;-.factor`(`*tmp*`, 1, value = structure(c(NA, 3L, 2L), .Label
## = c(&quot;chocolate&quot;, : invalid factor level, NA generated</code></pre>
<pre class="r"><code>df1</code></pre>
<pre><code>##    my_fruits my_animals   my_flavors
## 1      apple       dogs         &lt;NA&gt;
## 2     banana       cats       vanila
## 3 clementine     llamas cookie dough</code></pre>
<pre class="r"><code># because the column is a factor and only
# new values of the existing levels can be added
df1$my_flavors</code></pre>
<pre><code>## [1] &lt;NA&gt;         vanila       cookie dough
## Levels: chocolate cookie dough vanila butter pecan</code></pre>
<p>In such a case, we can first coerce the target column into a desired data type and then modify the cell.</p>
<pre class="r"><code># first we coerce the column into character class
df1$my_flavors &lt;- as.character(df1$my_flavors)

# now works!
df1$my_flavors[1] &lt;- &quot;mint chocolate chip&quot;

df1</code></pre>
<pre><code>##    my_fruits my_animals          my_flavors
## 1      apple       dogs mint chocolate chip
## 2     banana       cats              vanila
## 3 clementine     llamas        cookie dough</code></pre>
<p>You may encounter a similar issue when trying to give a <code>numeric</code> type value to an <code>integer</code> column. Make sure the data types match!</p>
</div>
</div>
<div id="extending-data-frame" class="section level2">
<h2>Extending data frame</h2>
<p>In practice, R’s original <code>data.frame</code> is rarely used since better alternatives are available. There are two prominant alternatives:</p>
<ul>
<li><code>tibble</code></li>
<li><code>data.table</code></li>
</ul>
<p>It is noteworthy that both alternatives are in fact extensions of the original <code>data.frame</code>. Consequently, either can be manipulated using methods for a data.frame objects.</p>
<div id="tibble" class="section level3">
<h3><code>tibble</code></h3>
<pre><code>## # A tibble: 5 x 5
##   column1 column2 column3 column4 column5
##     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1     11.     12.     13.     14.     15.
## 2     21.     22.     23.     24.     25.
## 3     31.     32.     33.     34.     35.
## 4     41.     42.     43.     44.     45.
## 5     51.     52.     53.     54.     55.</code></pre>
<p><code>tibble</code> is a part of the <code>tidyverse</code> framework (we’ll come back to this). A <code>tibble</code> object follows easily understood <code>tidyverse</code> syntax and has a refined print method, which can be seen as more informative and convenient. Coercing a data.frame object into a <code>tibble</code> can be done with <code>as_tibble()</code> from the <code>tibble</code> package.</p>
<p>Please see <a href="http://r4ds.had.co.nz/tibbles.html">here</a> for more on <code>tibble</code>.</p>
</div>
<div id="data.table" class="section level3">
<h3><code>data.table</code></h3>
<pre><code>##    column1 column2 column3 column4 column5
## 1:      11      12      13      14      15
## 2:      21      22      23      24      25
## 3:      31      32      33      34      35
## 4:      41      42      43      44      45
## 5:      51      52      53      54      55</code></pre>
<p><code>data.frame</code> objects are made available via the <code>data.table</code> package. It is highly optimized for larger tables (e.g. &gt;100K rows) and provides compact syntax for advanced slicing and dicing of tablular data. Coercing a <code>data.frame</code> object into a <code>data.table</code> can be done with <code>as.data.table()</code>.</p>
<p>See <a href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html">here</a> for more on <code>data.table</code>.</p>
<hr />
</div>
</div>
</div>
<div id="r-add-on-packages" class="section level1">
<h1>R Add-On Packages</h1>
<img src="https://s3.amazonaws.com/assets.datacamp.com/blog_assets/R+Packages+Guide/content_rdoc10.png" width="45%" style="display: block; margin: auto; box-shadow: none;" />
<div style="font-size:0.5em; text-align:center; color: #777;">
<p>Source: <a href="https://www.datacamp.com/">DataCamp</a></p>
</div>
<div id="what-are-add-on-packages" class="section level2">
<h2>What are add-on packages?</h2>
<blockquote>
<p>The capabilities of R are extended through user-created packages, which allow specialized statistical techniques, graphical devices, import/export capabilities, reporting tools […], etc. - “R (programming language)”, Wikipedia</p>
</blockquote>
</div>
<div id="package" class="section level2">
<h2>Using packages</h2>
<p>To use an add-on package, we first have to install it using, for example, the <code>install.packages()</code> function. Onces the package is installed, it can be imported to the global environment using <code>library()</code>.</p>
<pre class="r"><code># first we should install the desired package
install.packages(&quot;some_package&quot;)

# then we import the package to use its functionalities
library(some_package)</code></pre>
</div>
<div id="two-ways-of-installing-packages" class="section level2">
<h2>Two ways of installing packages</h2>
<p>There are in fact two ways to install new packages.</p>
<ol style="list-style-type: decimal">
<li>From CRAN (Comprehensive R Archive Network):
<ul>
<li>Packages that are listed on CRAN are tested and can be trusted. In other words, they are generally more robust towards bugs. We can install a pacakge from CRAN using <code>install.packages(&quot;package&quot;)</code>.</li>
</ul></li>
<li>From specific Github repositories (i.e., development versions):
<ul>
<li>If we want the latest version of a package with cutting-edge features, we may choose to install the package using the <code>install_github(&quot;author/package&quot;)</code> method, which will pull the most up-to-date version of the package as shown in its GitHub repository. The <code>install_github()</code> function is available via the <code>devtools</code> package.</li>
</ul></li>
</ol>
<p>Also, check out “Install Packages” <a href="https://vimeo.com/203516241">tutorial video</a> by RStudio, Inc.</p>
<hr />
</div>
</div>
<div id="tidyverse-framework" class="section level1">
<h1>Tidyverse Framework</h1>
<img src="../images/tidyverse.png" width="100%" style="display: block; margin: auto; box-shadow: none;" />
<div style="font-size:0.5em; text-align:center; color: #777;">
<p>Source: <a href="https://www.tidyverse.org/">tidyverse.org</a></p>
</div>
<p><code>tidyverse</code> is a set of packages that are based on a particular perspective on working with data in R. It is also one of the most popular styles of doing data analysis.</p>
<div id="tidy-approach-to-data-science" class="section level2">
<h2>Tidy approach to data science</h2>
<p>“The tidyverse framework” introduces the notion of tidy data. A dataset is tidy if:</p>
<blockquote>
<ol style="list-style-type: decimal">
<li>Each variable is in a column</li>
<li>Each observation is a row</li>
<li>Each value is a cell.</li>
</ol>
</blockquote>
<img src="http://r4ds.had.co.nz/images/tidy-1.png" width="100%" style="display: block; margin: auto; box-shadow: none;" />
<div style="font-size:0.5em; text-align:center; color: #777;">
<p>Source: Hadley Wickham, 2017, <a href="http://r4ds.had.co.nz/"><span style="font-style:italic">R for Data Science</span></a></p>
</div>
<ul>
<li>See <a href="http://r4ds.had.co.nz/tidy-data.html">here</a> for more on tidy data</li>
</ul>
</div>
<div id="untidy-data" class="section level2">
<h2>Untidy data?</h2>
<p>Anything that does not follow the aforementioned principles of a tidy dataset can be thought untidy:</p>
<ul>
<li>Multiple variables in a single column</li>
<li>Multiple observations in a single row</li>
<li>Multiple rows for a single observation</li>
<li>Multiple values in a single cell</li>
<li>Multiple cells for a single value</li>
</ul>
<div id="untidy-example-1" class="section level3">
<h3>Untidy example 1</h3>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre><code>##      year/county violentCrime/propertyCrime
## 1     2011/Adams                   218/1555
## 2 2011/Alexander                    119/290
## 3      2011/Bond                      6/211
## 4     2011/Boone                     59/733
## 5     2011/Brown                       7/38
## 6    2011/Bureau                     42/505</code></pre>
</div>
<div id="untidy-example-2" class="section level3">
<h3>Untidy example 2</h3>
<pre><code>##    index year    county typeViolent valueViolent
## 1      1 2011     Adams      murder            0
## 2      1 2011     Adams        rape           37
## 3      1 2011     Adams     robbery           15
## 4      1 2011     Adams  aggAssault          166
## 5      2 2011 Alexander      murder            0
## 6      2 2011 Alexander        rape           14
## 7      2 2011 Alexander     robbery            4
## 8      2 2011 Alexander  aggAssault          101
## 9      3 2011      Bond      murder            1
## 10     3 2011      Bond        rape            0</code></pre>
</div>
</div>
<div id="tidyverse-core-packages" class="section level2">
<h2>Tidyverse core packages</h2>
<ul>
<li><code>ggplot2</code> for data visualization</li>
<li><code>dplyr</code> for data manipulation</li>
<li><code>tidyr</code> for creating “tidy data”</li>
<li><code>readr</code> for data import/export</li>
<li><code>purrr</code> for loop operations</li>
<li><code>tibble</code> for data representation</li>
</ul>
</div>
<div id="resources" class="section level2">
<h2>Resources</h2>
<ul>
<li>RStudio, Inc., “tidy tutorial” <a href="https://vimeo.com/211352331">video</a></li>
</ul>
<hr />
</div>
</div>
<div id="good-code-bad-code" class="section level1">
<h1>Good Code, Bad Code</h1>
<img src="https://static01.nyt.com/images/2016/11/27/opinion/RFD-digital-connectedness/RFD-digital-connectedness-sfSpan.jpg" width="60%" style="display: block; margin: auto; box-shadow: none;" />
<div style="font-size:0.5em; text-align:center; color: #777;">
<p>Source: <a href="https://www.nytimes.com/">The New York Times</a></p>
</div>
<div id="why-style-guide" class="section level2">
<h2>Why style guide?</h2>
<blockquote>
<p>The goal [of the style guide] is to make our R code easier to read, share, and verify.<br>- Google’s R Style guide</p>
</blockquote>
<p>The key benefits of following a style guide include:</p>
<ul>
<li>Readability</li>
<li>Productivity</li>
<li>Reproducibility</li>
</ul>
</div>
<div id="which-style-guide" class="section level2">
<h2>Which style guide?</h2>
<p>Currently, there is no single style guide adopted by the R community as <em>the</em> standard. However, there are two style guides that are considered authoritative:</p>
<ul>
<li><a href="https://google.github.io/styleguide/Rguide.xml">Google’s R Style guide</a></li>
<li><a href="http://style.tidyverse.org/">Tidyverse style guide</a></li>
</ul>
</div>
<div id="personal-recommendations" class="section level2">
<h2>Personal recommendations</h2>
<p>I recommand anyone who are picking up R to start with the tidyverse style guide, which is suggested by one of the most influential personalities in R community, Hadley Wickham, and most widely adopted.</p>
<p>You may consider adding extra rules <em>only if</em> they will help your team to better collaborate and maintain code. Even then, you should keep the changes to minimum so that code remains accessible to others, including future teammates and even your future self!</p>
<p>In the following, I will offer some key elements of the tidyvese style guide:</p>
</div>
<div id="object-naming" class="section level2">
<h2>Object naming</h2>
<ul>
<li>Be descriptive yet concise
<ul>
<li>somewhat dependent on the shared knowledge on the subject matter</li>
</ul></li>
<li>Use underscore for names consisting of multiple words</li>
<li>Nouns for variables, verbs for functions</li>
<li>Avoid re-using common names for functions and variables
<ul>
<li>Using “reserved words” to assign objects will throw errors</li>
</ul></li>
</ul>
<div id="naming-a-variable-e.g.for-firearm-arrests" class="section level3">
<h3>Naming a variable (e.g. for firearm arrests)</h3>
<pre class="r"><code># Good
firearm_arr
fa_arr

# Bad
arrests_with_firearm_charges  # too verbose
firearmArrests                # violating underscore convention
FireArm_Arrests               # mixing underscore with other way of naming
farr                          # not descriptive enough
x                             # not descriptive at all</code></pre>
</div>
<div id="naming-a-function-e.g.for-counting-arrests" class="section level3">
<h3>Naming a function (e.g. for counting arrests)</h3>
<pre class="r"><code># Good
count_arr &lt;- function(x) { ... }

# Bad
num_arr &lt;- function(x) { ... }  # noun for a function
do_arr  &lt;- function(x) { ... }  # not descriptive enough
count   &lt;- function(x) { ... }  # too generic (common name)</code></pre>
</div>
<div id="reserved-words-in-r" class="section level3">
<h3>Reserved words in R</h3>
<pre class="r"><code>if else repeat while function for  
in next break  # used in loops, conditions, functions

TRUE FALSE  # logical values

NULL  # undefined

Inf  # infinity

NaN  # Not a Number

NA  # not available (missing)

NA_integer_ NA_real_
NA_complex_ NA_character_  # NA for atomic vector types

...  # dot method for one function to pass arguments to another</code></pre>
</div>
</div>
<div id="whitespaces-for-readable-code" class="section level2">
<h2>Whitespaces for readable code</h2>
<ul>
<li>Add a space
<ul>
<li>around operators (<code>+</code>, <code>-</code>, <code>&lt;</code>, <code>=</code>, etc.)
<ul>
<li>Exceptions include <code>:</code>, <code>::</code>, and <code>:::</code><br />
</li>
</ul></li>
<li>after a comma (but not before–like in regular English)</li>
<li>before a left paranthesis <code>(</code>, except when it is a function call</li>
</ul></li>
<li>Extra spacing for alignment of code</li>
<li>Indentation for clarifying hierarchy</li>
</ul>
<div id="adding-spaces" class="section level3">
<h3>Adding spaces</h3>
<pre class="r"><code># Good
greetings &lt;- paste(&quot;Hello&quot;, &quot;World!&quot;, sep = &quot; &quot;)
df[2, ]
x &lt;- 1:10 
base::Random() # calling a function with specifying the package

# Bad
greetings&lt;-paste(&quot;Hello&quot;,&quot;world!&quot;,sep=&quot;&quot;)
df[ 2,]
x&lt;- 1 : 10
base :: Random ()</code></pre>
</div>
<div id="extra-spacing" class="section level3">
<h3>Extra spacing</h3>
<pre class="r"><code># for aligning function arguments
some_function (
  first_argument   = value_1
  another_argument = value_2
  example          = value_3
)

# for aligning variable assignments
numbers        &lt;- c(1, 2, 3)
roman_numerals &lt;- c(&quot;I&quot;, &quot;II&quot;, &quot;III&quot;)
letters        &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)        </code></pre>
</div>
<div id="indentation" class="section level3">
<h3>Indentation</h3>
<pre class="r"><code># Good
if (x &gt; 0) {
  i = 0
  while (i &lt; 10) {
    message(&quot;Wait, I&#39;m in a loop&quot;)  
    i &lt;- i + 1
  }
  message(&quot;x is positive.&quot;)
} else {
  message(&quot;x is not positive&quot;)
}

# Bad
if (y &gt; 0) {
    j = 0
while (j &lt; 10) {
message(&quot;Wait, I&#39;m in a loop&quot;)  
j &lt;- j + 1
    }
      message(&quot;y is positive.&quot;)
} else {
message(&quot;y is not positive&quot;)
}</code></pre>
</div>
</div>
<div id="comments-for-intelligible-code" class="section level2">
<h2>Comments for intelligible code</h2>
<ul>
<li>Use comments (words after the <code>#</code> symbol) for clarification
<ul>
<li>add two spaces before starting a comment if the comment comes after an expression</li>
</ul></li>
<li>However, whenever possible, use <em>descriptive names</em> to reduce the need for clarification and avoid verbosity!</li>
<li>Example of unnecesary comment:</li>
</ul>
<pre class="r"><code># the following code calculates the average of some numbers
numbers &lt;- c(1, 3, 5)  # assign a vector of numbers to numbers object
average &lt;- sum(numbers) / length(numbers)  # divide the sum of numbers vecotr by its length to get the average</code></pre>
</div>
<div id="most-importantly" class="section level2">
<h2>Most importantly…</h2>
<ul>
<li>Be consistent!</li>
<li>Be concise!</li>
<li>Be clear!</li>
</ul>
<p>Finally, remember that the ultimate goal of adopting a particular coding style to facilitate your work.</p>
<hr />
</div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<ul>
<li>
Google. (n.d.). <a href="https://google.github.io/styleguide/Rguide.xml">“Google’s R Style Guide”</a>.
</li>
<li>
Grolemund, G. &amp; Wickham, H. (2017). <a href="http://r4ds.had.co.nz/"><span style="font-style:italic">R for Data Science</span></a>.
</li>
<li>
Wickham, H. (n.d.). <a href="http://style.tidyverse.org/">“The tidyverse style guide”</a>.
</li>
</ul>
</div>

<footer>
  <p>Copyright &copy; 2018 Bobae Kang. All rights reserved.</p>
  <a href="https://github.com/bobaekang/" class="icon-footer">
    <i class="fa fa-github fa-2x"></i>
  </a>
  <a href="https://www.linkedin.com/in/bobaekang/" class="icon-footer">
    <i class="fa fa-linkedin-square fa-2x"></i>
  </a>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
