<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Bobae Kang" />

<meta name="date" content="2018-02-13" />

<title>R Workshop R&amp;A Meeting Presentation</title>

<script src="presentation_notes_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="presentation_notes_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="presentation_notes_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="presentation_notes_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="presentation_notes_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="presentation_notes_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="presentation_notes_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="presentation_notes_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="presentation_notes_files/navigation-1.1/tabsets.js"></script>
<link href="presentation_notes_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="presentation_notes_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="../css/style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">R Workshop R&amp;A Meeting Presentation</h1>
<h4 class="author"><em>Bobae Kang</em></h4>
<h4 class="date"><em>February 13, 2018</em></h4>

</div>


<!-- fontawesome CDN -->
<p><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"></p>
<!-- logo -->
<div class="logo">
<p><a href="http://www.icjia.state.il.us/"><img src="../images/icjia.png" alt="ICJIA logo"></img></a></p>
</div>
<p>This page contains the script for <strong>R Workshop R&amp;A Meeting Presentation</strong>, prepared by ICJIA Research Analyst <a href="http://www.icjia.state.il.us/biographies/bobae-kang">Bobae Kang</a> for a Research and Analysis Unit monthly meeting on Feburary 13, 2018. The presentation is meant to announce and advertise the workshop series to the Unit as well as to provide a brief introduction to the workshop is about. The presentation slides are available <a href="../slides/presentation_slides.html"><strong>here</strong></a>.</p>
<hr />
<div id="welcome_" class="section level1">
<h1>Welcome_</h1>
<p><img src="../images/icjia-x-r.png" width="50%" style="display: block; margin: auto; box-shadow: none;" /></p>
<p>Welcome to this presentation. Today I would like to share with you a workshop series on R, which I have been developing to encourage and enable ICIJA researchers to incorporate R into their research and data analysis workflow.</p>
<p>This presentation can be roughly divided into two parts. In the first part, I will talk about what R is and demonstrate what it can do. This is the longer part of the talk. Then, I will briefly discuss the workshop objectives and structure.</p>
<div id="quick-survey" class="section level2">
<h2>Quick survey</h2>
<p>Before we move on, let us take a quick survey:</p>
<ul>
<li>How many of you have heard of R before?</li>
<li>How many of you have tried R before?</li>
<li>How many of you use R regularly?
<ul>
<li>(Can you briefly tell us what you use R for?)</li>
</ul></li>
</ul>
<hr />
</div>
</div>
<div id="a-brief-intro-to-r" class="section level1">
<h1>A brief intro to R</h1>
<p>Now let me give you a very brief introduction to R.</p>
<div id="what-is-r" class="section level2">
<h2>What is R?</h2>
<blockquote>
<p>“R is a language and environment for statistical computing and graphics.” - The R Foundation</p>
</blockquote>
<p>Accoring to the official documentation, R is a programming language that is specifically <em>built for</em> data analysis and visualization. In fact, it is one of the the most popular choices of programming language among academic researchers and data scientists.</p>
<p>Let’s take a closer look and talk about the benefits of using R in more details.</p>
<ul>
<li><p>First, R is open-source, which means free. Not only R is free, but also its supporting softwares are free. No strings attached. Being open-source also means that, if you are interested, you can look at the source code and find out exactly what each function is doing under the hood.</p></li>
<li><p>R is built for statistical analysis, which means that it already comes with a breadth of functionalities for data analysis and statistics. This sets R apart from other programming languages in general.</p></li>
<li><p>Using a programming language such as R allows researchers to conduct research in a reproducible and transparent fashion. Every step taken for data manipulation and statistical modeling is in plain sight, in the form of code, making it easy to replicate the results or collaborate with others. This also gives researchers a jump-start when starting a new, but similar project.</p></li>
<li><p>R can be greatly extended with powerful third-party packages, which are, or course, free of charge. The existence of numerous third-party packages is in fact one of the greatest advantages of using R that no proprietary sofewares, like SPSS, STATA, or SAS, can imitate.</p></li>
<li><p>With these packages, researchers can tackle a variety of tasks using a <em>single</em> platform, from collecting data to cleaning data to creating visualizations to fitting statistical models to generating a report, and even more.</p></li>
</ul>
<p>And, perhaps most importantly, with some practice, you can create amazing stuff with R!</p>
</div>
<div id="r-is-versatile" class="section level2">
<h2>R is versatile</h2>
<p>In other words, R is a powerfully versatile tool. Many who have not used R think that it is just another statistical software. That is not true at all. R is a programming language with a fast-growing ecosystem of diverse packages and applications, which enables its users to do wonders–literally.</p>
<p>For the next few minutes, I would like to quickly showcase what R is capable of.</p>
<hr />
</div>
</div>
<div id="data-manipulation" class="section level1">
<h1>Data manipulation</h1>
<p>Here, we will see how some basic data manipulation and analysis can be done using R.</p>
<div id="code-1" class="section level3">
<h3>Code 1</h3>
<pre class="r"><code># peak at the first rows of the data
ispcrime_tbl</code></pre>
<pre><code>## # A tibble: 510 x 12
##     year county violentCrime murder  rape robbery aggAssault propertyCrime
##    &lt;int&gt; &lt;fct&gt;         &lt;int&gt;  &lt;int&gt; &lt;int&gt;   &lt;int&gt;      &lt;int&gt;         &lt;int&gt;
##  1  2011 Adams           218      0    37      15        166          1555
##  2  2011 Alexa~          119      0    14       4        101           290
##  3  2011 Bond              6      1     0       0          5           211
##  4  2011 Boone            59      0    24       8         27           733
##  5  2011 Brown             7      0     1       0          6            38
##  6  2011 Bureau           42      0     4       3         35           505
##  7  2011 Calho~           13      0     0       0         13            56
##  8  2011 Carro~            8      0     1       0          7           206
##  9  2011 Cass             12      0     1       0         11           119
## 10  2011 Champ~         1210      5   127     208        870          5332
## # ... with 500 more rows, and 4 more variables: burglary &lt;int&gt;,
## #   larcenyTft &lt;int&gt;, MVTft &lt;int&gt;, arson &lt;int&gt;</code></pre>
<p>First, let us take a quick glance at our data. It is the State Police’s annual report of crime data for Illinois counties, from 2011 to 2015. It has total 510 rows and 12 columns. The columns include: year, county, violent crime total, four violent crime categories, property crime total, and four property crime categories. I will now show you how some questions can be answered using R code. Do not worry about understanding the code–we will learn all about it in the actual workshop.</p>
</div>
<div id="code-2" class="section level3">
<h3>Code 2</h3>
<pre class="r"><code># get a quick summary of violent crime and property crime
ispcrime_tbl %&gt;%
  select(violentCrime, propertyCrime) %&gt;%
  summary()</code></pre>
<pre><code>##   violentCrime   propertyCrime   
##  Min.   :    0   Min.   :     0  
##  1st Qu.:   19   1st Qu.:   133  
##  Median :   42   Median :   349  
##  Mean   :  501   Mean   :  2913  
##  3rd Qu.:  133   3rd Qu.:  1190  
##  Max.   :33348   Max.   :178902  
##  NA&#39;s   :7       NA&#39;s   :7</code></pre>
<p>Let’s say that we want to get some quick summary of violent crime and propety crime counts. As you can see here, getting some basic summary statistics of a selected set of columns can be done easily.</p>
</div>
<div id="code-3" class="section level3">
<h3>Code 3</h3>
<pre class="r"><code># filter to keep only counties starting with C for 2015
#   while creating and showing a new variable for total crime count
ispcrime_tbl %&gt;%
  filter(substr(county, 1, 1) == &quot;C&quot;, year == 2015) %&gt;%
  mutate(totalCrime = violentCrime + propertyCrime) %&gt;%
  select(year, county, totalCrime)</code></pre>
<pre><code>## # A tibble: 12 x 3
##     year county     totalCrime
##    &lt;int&gt; &lt;fct&gt;           &lt;int&gt;
##  1  2015 Calhoun            NA
##  2  2015 Carroll           176
##  3  2015 Cass              154
##  4  2015 Champaign        6486
##  5  2015 Christian         292
##  6  2015 Clark             103
##  7  2015 Clay              191
##  8  2015 Clinton           423
##  9  2015 Coles             805
## 10  2015 Cook           153575
## 11  2015 Crawford          282
## 12  2015 Cumberland         42</code></pre>
<p>Now we want to ask a more complicated question: What are the total crime count in 2015 for counties where the name starts with letter C? This involves getting a desired subset of our data and creating a new computed column for the total crime count. No problem. By the way, notice that the code itself is intuitive enough to be informative even to non-R-users.</p>
<p>Now, let’s ask a slightly different question: What about counties starting with “D” for not just in 2015 but also in 2014?</p>
<pre class="r"><code># how about &quot;D&quot; counties in 2014 and 2015?
ispcrime_tbl %&gt;%
  filter(substr(county, 1, 1) == &quot;D&quot;, year %in% c(2014, 2015)) %&gt;%
  mutate(totalCrime = violentCrime + propertyCrime) %&gt;%
  select(year, county, totalCrime)</code></pre>
<pre><code>## # A tibble: 8 x 3
##    year county  totalCrime
##   &lt;int&gt; &lt;fct&gt;        &lt;int&gt;
## 1  2014 De Kalb       2218
## 2  2014 De Witt        182
## 3  2014 Douglas        116
## 4  2014 Du Page      12576
## 5  2015 De Kalb       2173
## 6  2015 De Witt        140
## 7  2015 Douglas        173
## 8  2015 Du Page      12538</code></pre>
<p>Well, here is the answer. Notice how similar the code looks to the previous case with only two minor changes. This shows the power of writing code for data analysis. You can take your earlier work and tweak it just a little to answer a new question.</p>
</div>
<div id="code-4" class="section level3">
<h3>Code 4</h3>
<pre class="r"><code># get annual average crime count by county
ispcrime_tbl %&gt;%
  group_by(county) %&gt;%
  summarise(annualAvgCrime = sum(violentCrime, propertyCrime, na.rm = TRUE) / n())</code></pre>
<pre><code>## # A tibble: 102 x 2
##    county    annualAvgCrime
##    &lt;fct&gt;              &lt;dbl&gt;
##  1 Adams             1724  
##  2 Alexander          385  
##  3 Bond               190  
##  4 Boone              426  
##  5 Brown               39.0
##  6 Bureau             480  
##  7 Calhoun             13.8
##  8 Carroll            196  
##  9 Cass               109  
## 10 Champaign         6567  
## # ... with 92 more rows</code></pre>
<p>Let’s now try aggregating data. Our new question is: what is the annual average of the crime count per county? With only a few line of code, we get the answer.</p>
<p>Now, suppose we want to sort the result by the average count?</p>
<pre class="r"><code># sort by average crime count? 
ispcrime_tbl %&gt;%
  group_by(county) %&gt;%
  summarise(annualAvgCrime = sum(violentCrime, propertyCrime, na.rm = TRUE) / n()) %&gt;%
  arrange(desc(annualAvgCrime))</code></pre>
<pre><code>## # A tibble: 102 x 2
##    county    annualAvgCrime
##    &lt;fct&gt;              &lt;dbl&gt;
##  1 Cook              182818
##  2 Du Page            14316
##  3 Lake               12779
##  4 Winnebago          12275
##  5 Will               11078
##  6 St. Clair           9262
##  7 Sangamon            8876
##  8 Kane                8332
##  9 Peoria              7229
## 10 Champaign           6567
## # ... with 92 more rows</code></pre>
<p>One extra line of code can give us the answer!</p>
</div>
<div id="code-5" class="section level3">
<h3>Code 5</h3>
<pre class="r"><code># merging regions data and count the number of rows by region
ispcrime_tbl %&gt;%
  left_join(regions) %&gt;%
  group_by(region) %&gt;%
  count()</code></pre>
<pre><code>## # A tibble: 4 x 2
## # Groups:   region [4]
##   region       n
##   &lt;fct&gt;    &lt;int&gt;
## 1 Central    230
## 2 Cook         5
## 3 Northern    85
## 4 Southern   190</code></pre>
<p>We often have to merge two separate tables into one to get the answer we want. This code block merges the State Police crime table with another table named regions, which connects each county to the corresponding region. Then we aggregate and get a frequency table on the regional level.</p>
<p>Here, however, we see that numbers don’t make sense. This is because there are five observations for each county in our data.</p>
<pre class="r"><code># no duplicates!
ispcrime_tbl %&gt;%
  select(county) %&gt;%
  unique() %&gt;%
  left_join(regions) %&gt;%
  group_by(region) %&gt;%
  count()</code></pre>
<pre><code>## Joining, by = &quot;county&quot;</code></pre>
<pre><code>## # A tibble: 4 x 2
## # Groups:   region [4]
##   region       n
##   &lt;fct&gt;    &lt;int&gt;
## 1 Central     46
## 2 Cook         1
## 3 Northern    17
## 4 Southern    38</code></pre>
<p>Simply by adding couple extra commands to our original code, we get the answer we want.</p>
<p>As we have seen, R provides a simple yet powerful grammer for data analysis with an added benefit of reuseable code. We can do all these data manipulation for very large data sets with little delay.</p>
<p>This is only a tip of an iceberg, and we will learn more in the workshop about using our data to answer more complicated questions.</p>
<hr />
</div>
</div>
<div id="data-visualization" class="section level1">
<h1>Data visualization</h1>
<p>Moving on to the world of data visualization. R ecosystem provides great data visualization packages that allow us to create publication-ready plots with a few lines of code.</p>
<div id="examples-1-word-cloud" class="section level3">
<h3>Examples 1: Word cloud</h3>
<img src="../images/dataviz_example1.png" width="50%" />
<div style="font-size:0.5em; margin-left:10px; color: #777;">
<p>Source: <a href="http://www.r-graph-gallery.com/102-text-mining-and-wordcloud/">The R Graph Gallery</a></p>
</div>
<p>First, here is a wordcloud plot generated using <code>wordcloud</code> package. We don’t always need to generate a wordcloud plot, but simply knowing that it is possible allows us to explore creative ways to visualize and extract insights from our data.</p>
</div>
<div id="example-2-dendrogram" class="section level3">
<h3>Example 2: Dendrogram</h3>
<img src="../images/dataviz_example2.png" width="50%" />
<div style="font-size:0.5em; margin-left:10px; color: #777;">
<p>Source: <a href="http://www.r-graph-gallery.com/93-parrallel-plot/">The R Graph Gallery</a></p>
</div>
<p>Second example is a dendrogram, or a tree plot, created with <code>dendextend</code> package. This allows us to create a visual representation of a decision tree. Creating this takes less than 10 lines of R code.</p>
</div>
<div id="example-3-network-graph" class="section level3">
<h3>Example 3: Network graph</h3>
<img src="../images/dataviz_example3.png" width="50%" />
<div style="font-size:0.5em; margin-left:10px; color: #777;">
<p>Source: <a href="https://cran.r-project.org/web/packages/ggCompNet/vignettes/examples-from-paper.html">The Comprehensive R Archive Network</a></p>
</div>
<p>This is a work of network visualization using <code>ggnet2</code> package. This plot, again, takes less than 10 lines of code to create.</p>
</div>
<div id="example-4-line-graph" class="section level3">
<h3>Example 4: Line graph</h3>
<p><img src="../images/dataviz_example4.png" width="50%" /></p>
<p>Now let me share with you a couple of my own work. This is a line plot I made a few months ago, to compare the State Police data and FBI data. This is not two different plots manually put together, but a single plot with two sets of line graphs generated at the same time with the same R code.</p>
</div>
<div id="example-5-choropleth-map" class="section level3">
<h3>Example 5: Choropleth map</h3>
<p><img src="../images/dataviz_example5.png" width="50%" /></p>
<p>And here is a map I created as a practice. This was in fact my attempt to reproduce another map created in ArcGIS.</p>
<p><img src="../images/dataviz_example5-1.png" width="50%" /></p>
<p>Do they it look similar to each other?</p>
</div>
<div id="quick-demonstration" class="section level2">
<h2>Quick demonstration</h2>
<ul>
<li>Bar plot</li>
<li>Histogram</li>
</ul>
<p>To help you to see how generating a plot looks like in R, I prepared a couple of demonstrations, one using a bar plot and another using a histogram.</p>
<div id="bar-plot" class="section level3">
<h3>Bar plot</h3>
<pre class="r"><code># bar plot of crime count in 2015 by region
barplot &lt;- ggplot(filter(ispcrime_tbl2, year == 2015), aes(x = region, y = violentCrime, fill = region, group = region)) +
  stat_summary(geom = &quot;bar&quot;, fun.y = &quot;sum&quot;)

barplot</code></pre>
<p><img src="presentation_notes_files/figure-html/unnamed-chunk-18-1.png" width="480" /></p>
<p>This is a simple bar plot of total violent crime count by region, using <code>ggplot2</code> package. Each region is represented by each bar and a color. A legend for color coding is generated on the side as a default. Looks okay, but we can improve it a little more. How about we make the words easier to read by increasing the font size? Also, let’s give it a descriptive title. Lastly, we don’t like that grey background, so let’s give it a different look.</p>
<pre class="r"><code># add title and change appearance
barplot2 &lt;- barplot +
  labs(title = &quot;Violent crime count in 2015 by region&quot;) +
  theme_classic(base_size = 15)

barplot2</code></pre>
<p><img src="presentation_notes_files/figure-html/unnamed-chunk-19-1.png" width="480" /></p>
<p>And viola! The plot now has a title that tells us what it is about and the font size is easiler to read. Also, the plot has a new theme and the grey background is gone. Notice that, in the code block, the previous plot, stored in an object called <code>barplot</code> is used to make the code more succinct and less repetitive. I think this looks fine, but let’s improve it a little more by removing redundant information. Also, let’s try different colors.</p>
<pre class="r"><code># remove the axes names and legends, and change colors
barplot2 +
  labs(x = &quot;&quot;, y = &quot;&quot;) +
  theme(legend.position = &quot;None&quot;) +
  scale_fill_brewer(palette=&quot;Spectral&quot;)</code></pre>
<p><img src="presentation_notes_files/figure-html/unnamed-chunk-20-1.png" width="480" /></p>
<p>And here is the result. The names for x- and y- axes, as well as the legend, are all gone since the title is enough to convey all the information needed to understand the plot. Also, we changed the color using a predefined palette. I don’t know if this looks better, but for demonstration purposes, it’s alright.</p>
</div>
<div id="histogram" class="section level3">
<h3>Histogram</h3>
<pre class="r"><code># histogram of burglary count by county
ggplot(ispcrime_tbl2, aes(x = burglary)) +
  geom_histogram() +
  facet_wrap(~ year) +
  labs(x = &quot;Burglary count&quot;, y = &quot;# counties&quot;) +
  theme_minimal()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="presentation_notes_files/figure-html/unnamed-chunk-21-1.png" width="480" /></p>
<p>Now let’s take a look at some histograms. Earlier we saw a plot with multiple graphes. This, too, is a series of graphes, each showing the histogram of burglary count for each year. But, wait, the picture seems overly skewed. After some investigation, we learn that Cook county is an outlier that distorts our picture. How can we fix this?</p>
<pre class="r"><code># exclude Cook county data from the histogram and add colors
ggplot(filter(ispcrime_tbl2, county != &quot;Cook&quot;), aes(x = burglary, fill = Year)) +
  geom_histogram() + facet_wrap(~ Year) +
  labs(x = &quot;Burglary count&quot;, y = &quot;# counties&quot;) +
  theme_minimal()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="presentation_notes_files/figure-html/unnamed-chunk-22-1.png" width="480" /></p>
<p>One way to do this is simply to remove the Cook county from the data, which can be done quite easily. Since we are determined to make it look better, we also throw some colors in it. Is this better? I think so.</p>
<p>As we have seen in this demonstrations, R offers powerful and flexible plotting functionalities that allow us to create amazing visualizations.</p>
<hr />
</div>
</div>
</div>
<div id="statistical-modeling" class="section level1">
<h1>Statistical modeling</h1>
<p>As I mentioned earlier, R is a programming language for statistical analysis. As such, it offers powerful statistical modeling functionalities, which are also made easy to implement. Here I will offer a simplified example of fitting a linear regression model to data. We will delve deeper into the subject in the workshop.</p>
<div id="simple-linear-model-1" class="section level3">
<h3>Simple linear model 1</h3>
<pre class="r"><code>lm_fit &lt;- lm(violentCrime ~ propertyCrime, ispcrime)
summary(lm_fit)</code></pre>
<pre><code>## 
## Call:
## lm(formula = violentCrime ~ propertyCrime, data = ispcrime)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -2239.5    -2.2    57.0    78.3  3992.9 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   -79.768287  16.496961  -4.835 1.77e-06 ***
## propertyCrime   0.199367   0.001059 188.303  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 363.5 on 501 degrees of freedom
##   (7 observations deleted due to missingness)
## Multiple R-squared:  0.9861, Adjusted R-squared:  0.986 
## F-statistic: 3.546e+04 on 1 and 501 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>We use the State Police crime data we have seen earlier. In this simple example, we fit a simple linear regression, using the property crime count as the explanatory variable and the violent crime count as the response variable. It takes a single line of code to fit a model and another line to print the result, which gives us useful information about the fitted coefficients and goodness-of-fit measures.</p>
</div>
<div id="simple-linear-model-2" class="section level3">
<h3>Simple linear model 2</h3>
<pre class="r"><code># put model fit results in a data frame format
tidy(lm_fit)</code></pre>
<pre><code>##            term    estimate   std.error  statistic      p.value
## 1   (Intercept) -79.7682868 16.49696109  -4.835332 1.771126e-06
## 2 propertyCrime   0.1993675  0.00105876 188.302852 0.000000e+00</code></pre>
<p>It is also possible to put the model fit results into a tabular data object, which can be easily manipulated or visualized as needed.</p>
</div>
<div id="simple-linear-model-3" class="section level3">
<h3>Simple linear model 3</h3>
<pre class="r"><code># get predictions and residuals for each data point
ispcrime %&gt;%
  select(year, county, propertyCrime, violentCrime) %&gt;%
  add_predictions(lm_fit) %&gt;%
  add_residuals(lm_fit) %&gt;%
  head()</code></pre>
<pre><code>##   year    county propertyCrime violentCrime      pred      resid
## 1 2011     Adams          1555          218 230.24816 -12.248156
## 2 2011 Alexander           290          119 -21.95172 140.951715
## 3 2011      Bond           211            6 -37.70175  43.701747
## 4 2011     Boone           733           59  66.36808  -7.368081
## 5 2011     Brown            38            7 -72.19232  79.192322
## 6 2011    Bureau           505           42  20.91229  21.087706</code></pre>
<p>Here we see that the predicted values and residuals can be readily added to the original table.</p>
</div>
<div id="simple-linear-model-4" class="section level3">
<h3>Simple linear model 4</h3>
<pre class="r"><code># plot the model fit
plot(violentCrime ~ propertyCrime, ispcrime)
abline(lm_fit)</code></pre>
<p><img src="presentation_notes_files/figure-html/unnamed-chunk-27-1.png" width="480" /></p>
<p>We can visualize the model fit with simple code.</p>
</div>
<div id="simple-linear-model-5" class="section level3">
<h3>Simple linear model 5</h3>
<pre class="r"><code># show diagnostic plots
par(mfrow=c(2, 2))
plot(lm_fit)</code></pre>
<p><img src="presentation_notes_files/figure-html/unnamed-chunk-28-1.png" width="480" /></p>
<p>And take a look at the diagnostic plots. (This command generates a Residuals versus fitted values plot, a Q-Q plot, a scale-location plot, and a plot of residuals versus leverage plot with Cook’s distance lines.)</p>
<p>Of course, using thrid-party packages, it is also possible to generate a more aesthetically pleasing plots for model fits.</p>
</div>
<div id="generalized-linear-model" class="section level3">
<h3>Generalized linear model</h3>
<pre class="r"><code># examples of generalized linear models with glm()
logistic_reg &lt;- glm(binary_y ~ x1 + x2, data = mydata, family = binomial())
poisson_reg &lt;- glm(count_y ~ x1 + x2, data = mydata, family = poisson())
gamma_reg &lt;- glm(y ~ x1 + x2, data = mydata, family = Gamma())</code></pre>
<p>As a default, R offers generalized linear models as well, including logistic regression for binary response variable, poisson model for count data, and gamma regression to fit a wide range of shapes.</p>
</div>
<div id="other-advanced-models" class="section level3">
<h3>Other advanced models</h3>
<p>And, with extra packages, R can fit a variety of other advanced models. Here are some examples:</p>
<ul>
<li>time series models (e.g. <code>stats</code> and <code>forecast</code> packages)</li>
<li>spatial regression models (e.g. <code>spdep</code> and <code>spgwr</code> packages)</li>
<li>survival analysis (e.g. <code>survival</code> package)</li>
<li>network analysis (e.g. <code>network</code> and <code>igraph</code> packages)</li>
<li>text analysis (e.g. <code>tm</code> and <code>tidytext</code> packages)</li>
<li>machine learning (e.g. <code>caret</code> and <code>mlr</code> packages)</li>
</ul>
<p>We see that advanced modeling involves many different packages. This may look daunting at first, but this actually offers us some freedom of choice in terms of which package to use to tackle the problem at hand. If there is no tool suited for our problem, we can even create a function or package. In fact, this is how R grows in its versatility, i.e., through packages developed by its users for specific tasks.</p>
<hr />
</div>
</div>
<div id="and-more" class="section level1">
<h1>And more!</h1>
<p>Researchers can do much more than just data work with R. In fact, R can serve as a research platform that provides a smooth workflow, from collecting data to publishing the analysis in various formats.</p>
<div id="reports" class="section level2">
<h2>Reports</h2>
<p>First of all, R offers its own markdown format, called RMarkdown, which can be used to generate documents in HTML, PDF and Microsoft Word formats. If the output is an HTML page, we can add some interactive elements using <code>htmlwidgets</code> and <code>shiny</code> packages. RMarkdown allows us not only to add some nice formatting to our document, but also to incorporate R code as well as its outputs into the document.</p>
<div id="example---r-notebook" class="section level3">
<h3>Example - R Notebook</h3>
<p><img src="../images/report.png" width="66%" style="display: block; margin: auto; box-shadow: none;" /></p>
<p>This example is actually from my own work for the Firearm Recidivism Study. I created it as a quick report to share my analysis with Chris. This one is me examining the original arrests in 2003 for the firearm study. As you see, the report includes R code and its inputs, making each step in the process highly transparent while incorporting them into a larger narrative.</p>
</div>
</div>
<div id="slideshow" class="section level2">
<h2>Slideshow</h2>
<p><img src="../images/slideshow.png" width="66%" style="display: block; margin: auto; box-shadow: none;" /></p>
<p>R offers tools to create a nice-looking slideshow. The slides for this very presentation are generated using what is called RPresentation.</p>
</div>
<div id="dashboard" class="section level2">
<h2>Dashboard</h2>
<p><a href="https://bobaekang.shinyapps.io/crime_data_profile_demo/"> <img src="../images/dashboard_demo.png" width="66%" style="display: block; margin: auto; box-shadow: none;" /> </a></p>
<p>With <code>shiny</code> package, we can also create a web application that can serve as an interactive dashboard.</p>
<p>In fact, let me take you to the dashboard for a minute. While Tableau offers a more user-friendly interface for creating a highly functional dashboard, it can also be done using R, and since R and Shiny are all open source, it costs nothing. In addition, if we need our dashboard to run complex computations or model-fitting and do more than a simple slicing-and-dicing of our data, R may be better suited for such a project.</p>
</div>
<div id="website" class="section level2">
<h2>Website</h2>
<p><a href="https://bobaekang.github.io/icjia-r-workshop/"> <img src="../images/website.png" width="66%" style="display: block; margin: auto; box-shadow: none;" /> </a></p>
<p>Since we can generate HTML pages with R, it should be no surprise that we can create a website using R. In fact, I have created a website for this workshop series as well. The website will have all the workshop materials so that anyone can review or preview those materials at any time and place.</p>
<hr />
</div>
</div>
<div id="objectives" class="section level1">
<h1>Objectives</h1>
<p>We are finally in the second part of this presentation where we can talk about the objectives and structure of this workshop series–very briefly.</p>
<p>This workshop series has <strong>technical objectives</strong> concerning developing practical skills and <strong>fundamantal objectives</strong> that are more about building the foundation for incorporating R programming into research.</p>
<div id="technical-objectives" class="section level2">
<h2>Technical objectives</h2>
<p>On the techincal level, the workshop series seeks to equip ICJIA researchers with skills and knowledge to do the following tasks using R:</p>
<ul>
<li>Import and manipulate tabular data files;</li>
<li>Create simple data visualizations to extract insight from data;</li>
<li>Perform basic statistical analysis;</li>
<li>Generate a report on a simple data analysis task</li>
</ul>
<p>These skills should allow anyone to get started with R for easy- to intermediate-level data analysis and reseasrch tasks.</p>
</div>
<div id="fundamental-objectives" class="section level2">
<h2>Fundamental objectives</h2>
<p>Now, on the more fundamantal level, I hope this workshop will help the participants to do the following:</p>
<ul>
<li>Understand the basic elements of the R programming language;
<ul>
<li>This, by the way, is a great introduction to programming in general since R shares with other programming languages some fundamental elements.</li>
</ul></li>
<li>Employ the programmatic approach to research and data analysis projects;
<ul>
<li>I will talk more about this in the first workshop session, but basically, I believe that the benefits of taking a programmtic approach to research outweighs the initial pain of learning and implementing it.</li>
</ul></li>
<li>Leverage online resources to find solutions to specific questions on using R for a given task.
<ul>
<li>This is a critical skill since, while we cannot learn answers to all questions, we can almost always find them out there. R ecosystem is still growing, but it has matured enough to provide most functionalities for common tasks.</li>
</ul></li>
</ul>
<p>With such fundamentals, after going through the workshop series, a participant will be able to find right tools for the given task as well as ways to use them properly. This workshop is not pretending to teach its participants everything about R, but it will certainly teach them how to fish.</p>
<hr />
</div>
</div>
<div id="structure" class="section level1">
<h1>Structure</h1>
<p>Finally, let me give you an overview of how the workshop is structured.</p>
<div id="overall-setup" class="section level2">
<h2>Overall setup</h2>
<p>The workshop series consists of six sessions, or modules, each of which focusing on a specific topic. I will explain what the modules are about in a minute.</p>
<p>The workshop group can meet once a week for six weeks, each week working on one module. Each module has two parts, excpet, maybe, for the first module that serves as an introduction. All workshop materials, such as slides and notes, will be available on the webpage I showed earlier. Of course, I will be available, too, for answering questions if there are any.</p>
</div>
<div id="modules" class="section level2">
<h2>Modules</h2>
<p>Now let me quickly walk you thorugh the modules.</p>
<div id="introduction-to-r" class="section level3">
<h3>1. Introduction to R</h3>
<p>Here, I will introduce the R language as well as the programmatic approach to research. I will make a case for the programmatic approach and using R to support that. I will also talk about installing R and RStudio.</p>
</div>
<div id="r-basics" class="section level3">
<h3>2. R basics</h3>
<p>Here, I will discuss the basic building blocks of R language. I will also introduce the popular tidyverse framework and offer some recommendations as to a “good” style for coding in R.</p>
</div>
<div id="data-analysis-in-r" class="section level3">
<h3>3. Data analysis in R</h3>
<p>I believe this is one of the most helpful modules, focusing on manimuplating and transforming tabular data using R. We will learn how to import data into R environment and use common tidyverse syntax to clean and analyze data.</p>
</div>
<div id="data-visualization-in-r" class="section level3">
<h3>4. Data visualization in R</h3>
<p>Here, we will get started with generating plots to visually present and communicate insights from data.</p>
</div>
<div id="statistical-modeling-in-r" class="section level3">
<h3>5. Statistical modeling in R</h3>
<p>This module focuses on how to conduct basic statistical analysis with R.</p>
</div>
<div id="sharing-your-analysis-and-more" class="section level3">
<h3>6. Sharing your analysis and more</h3>
<p>Here I will discuss various ways to share research and data analysis results via nice-looking reports, slideshows, dashboard and more.</p>
<hr />
</div>
</div>
</div>
<div id="questions" class="section level1">
<h1>Questions?</h1>
<p>That was the end of the presentation. Do you have any questions?</p>
<p>Thank you so much for paying attention to my presentation!</p>
</div>

<footer>
  <p>Copyright &copy; 2018 Bobae Kang. All rights reserved.</p>
  <a href="https://github.com/bobaekang/" class="icon-footer">
    <i class="fa fa-github fa-2x"></i>
  </a>
  <a href="https://www.linkedin.com/in/bobaekang/" class="icon-footer">
    <i class="fa fa-linkedin-square fa-2x"></i>
  </a>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
